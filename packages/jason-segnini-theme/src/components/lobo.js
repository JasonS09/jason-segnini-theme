import {connect, styled, css} from "frontity"
import {glowForPolygon, draw} from "../styles/keyframes"
import {useRef, useEffect, useState} from "react"

const Lobo = ({state, ...rest}) => {
    const ref = useRef(null)
    const [length, setLength] = useState(0)

    useEffect(() => {
        if (ref.current) 
            setLength(ref.current.getTotalLength())
    })

    return (
        <svg width="143" height="173" {...rest}>
            <Path 
                color={state.theme.color}
                d="m 127.7888,66.453374 c -0.54431,-1.08862 4.21838,-36.19644 4.21838,-36.19644 l -1.36077,-7.48423 -17.14569,19.45899 -4.35446,12.51907 1.08863,11.02222 m -95.02368,0.68039 c 0.54431,-1.08862 -4.21838,-36.19644 -4.21838,-36.19644 l 1.36076,-7.48423 17.14569,19.45899 4.35446,12.51907 -1.08862,11.02222 m 43.8346,42.302866 -5.09971,2.40553 M 91.37304,35.893704 71.98112,29.655854 h -0.96221 m 61.38889,-18.089519 3.46395,14.433129 -9.62208,48.68776 -22.51568,-12.8936 -21.55346,-20.39882 50.22727,-29.828469 -26.36451,29.443579 -2.3093,20.78371 m 22.51568,12.8936 8.85232,26.172066 -34.79893,22.21052 m -17.14745,31.69744 28.57612,-52.79783 -3.81015,-28.529436 m -48.07717,81.327266 11.54319,6.64443 11.76801,-6.64443 8.57284,-32.25021 15.98902,-12.99535 M 68.2285,147.4302 h 6.54302 l 2.88663,2.88663 -6.06192,7.60143 -6.25436,-7.60143 2.88663,-2.88663 m -32.94596,-37.77242 15.98903,12.85926 8.57284,32.25021 -17.69176,-31.9696 m 61.58134,-61.004026 -26.29361,34.732728 32.79451,-30.753368 -2.31331,7.667 M 66.4003,108.07585 71.59623,143.87002 76.59972,108.07585 94.4968,98.742432 107.92158,73.439984 71.50001,110.48138 M 35.07843,73.439984 71.50001,110.48138 48.50322,98.742432 35.07843,73.439984 M 16.75034,74.687224 7.8980192,100.85929 42.15265,122.79765 31.26828,101.96942 35.07843,73.439984 32.76512,65.772984 65.55964,96.526352 39.26602,61.793624 M 10.59221,11.566335 7.1282492,25.999464 16.75034,74.687224 39.26602,61.793624 m 31.75289,-32.13777 -19.05174,5.9657 -41.37496,-24.055219 26.36451,29.443579 2.3093,20.78371 21.55347,-20.39882 -8.85232,-5.77325"
                length={length}
                ref={ref}
            />     
        </svg>
    )
}

export default connect(Lobo)

const Path = styled.path`
    ${props => css`
        stroke: ${props.color};
        stroke-dasharray: ${props.length};
        stroke-dashoffset: ${props.length};
        animation: ${draw} 10s ease-out forwards,
            ${glowForPolygon(
                props.color, 3, 7, 1, 1
            )} 3s ease-out alternate infinite;
    `}
`